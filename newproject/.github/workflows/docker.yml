steps:
  - name: 1. Checkout code
    uses: actions/checkout@v3

  - name: 2. Set up Node 18
    uses: actions/setup-node@v3
    with:
      node-version: 18

  - name: 3. Install dependencies
    run: npm install

  - name: 4. Build React App
    run: npm run build

  - name: 5. Login to Docker Hub
    uses: docker/login-action@v2
    with:
      username: ${{ secrets.DOCKER_USERNAME }}
      password: ${{ secrets.DOCKER_PASSWORD }}
      
  - name: 6. Build Docker Image
    # Image tag is set to your username/repo-name
    run: docker build -t rachnarajak/react-newproject .

  - name: 7. Push Docker Image
    # Corrected: We use the actual image name here, not another secret for the username part
    run: docker push rachnarajak/react-newproject:latest
